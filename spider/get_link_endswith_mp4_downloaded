import requests
from bs4 import BeautifulSoup
archive_url = "http://www-personal.umich.edu/~csev/books/py4inf/media/"

# only download the mp4 file

def get_video_links():
    r= requests.get(archive_url)
    soup = BeautifulSoup(r.content,'html5lib')
    links = soup.findAll('a')
    mp4_link = [archive_url + link['href'] for link in links if link['href'].endswith('mp4')]
    return mp4_link

mp4_link = get_video_links()

#def down_mp4(video_link):
for link in mp4_link:
    file_name  = link.split('/')[-1]
    print('Downloading files {}'.format(file_name) )
    r = requests.get(link,stream=True)

    with open(file_name,'wb') as f:
        for chunk in r.iter_content(chunk_size = 1024 * 1024):
            if chunk:
                f.write(chunk)
                
    print('All videos downloaded')
